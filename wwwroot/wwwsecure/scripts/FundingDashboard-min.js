var fundingURL, resetURL, localhost = !1, serverData = null, table = null; function InitialiseTable() { table = $("#funding").DataTable({ data: serverData, lengthMenu: [5, 10, 15, 20, 25], columns: [{ data: "name" }, { data: "csp" }, { data: "serviceLine" }, { data: "description" }, { data: "minimumCriteria" }, { data: "fundingValue" }, { data: "supportingDocumentation" }, { data: "howToApply" }, { data: "whenToApply" }, { data: "approvalProcess" }, { data: "fundingCollection" }, { data: "addedBy" }, { data: "addedOn" }, { data: "uk" }, { data: "usa" }, { data: "eur" }, { data: "asia" }], responsive: { details: { display: $.fn.dataTable.Responsive.display.modal({ header: function (a) { return "Details for " + a.data().name } }), renderer: $.fn.dataTable.Responsive.renderer.tableAll({ tableClass: "table" }) } }, columnDefs: [{ className: "mobile-p", targets: [7] }, { targets: 12, render: $.fn.dataTable.render.moment("YYYY-MM-DDTHH:mm:ss", "DD-MM-YYYY") }, { targets: [0, 1, 2, 3, 4, 5, 6, 12, 7], visible: !0, searchable: !0 }, { targets: [7, 8, 9, 10, 11, 13, 14, 15, 16], visible: !1, searchable: !1 }] }) } function loadFundingReset() { try { $.getJSON(resetURL, function (a, e) { var n; "success" == e ? ($(serverData = a).each(function (a, e) { $.trim(e.csp), $.trim(e.serviceLine); var n = e.addedOn; new Date(n) }), (n = $("#funding").DataTable()).clear(), n.rows.add(a), n.draw()) : (alert("Database Connection Error"), alert = !0) }) } catch (a) { alert(a) } } function loadFundingCSP(a) { try { $.getJSON(fundingURL + "/byCSP?CSP=" + a, function (a, e) { var n; "success" == e ? ($(a).each(function (a, e) { $.trim(e.csp), $.trim(e.serviceLine); var n = e.addedOn; new Date(n) }), (n = $("#funding").DataTable()).clear(), n.rows.add(a), n.draw()) : (alert("Database Connection Error"), alert = !0) }) } catch (a) { alert(a) } } function loadFundingSL(a) { try { $.getJSON(fundingURL + "/bySL?SL=" + a, function (a, e) { var n; "success" == e ? ($(a).each(function (a, e) { $.trim(e.csp), $.trim(e.serviceLine); var n = e.addedOn; new Date(n) }), (n = $("#funding").DataTable()).clear(), n.rows.add(a), n.draw()) : (alert("Database Connection Error"), alert = !0) }) } catch (a) { alert(a) } } function loadFundingGeo(a) { try { $.getJSON(fundingURL + "/byRegion?Region=" + a, function (a, e) { var n; "success" == e ? ($(a).each(function (a, e) { $.trim(e.csp), $.trim(e.serviceLine); var n = e.addedOn; new Date(n) }), (n = $("#funding").DataTable()).clear(), n.rows.add(a), n.draw()) : (alert("Database Connection Error"), alert = !0) }) } catch (a) { alert(a) } } resetURL = fundingURL = localhost ? "http://localhost:8080/api/Funding" : "https://fundingdashboard.azurewebsites.net/api/Funding", $(document).ready(function () { InitialiseTable(), loadFundingReset() }); var clearFundingTable = function () { $("#funding tbody tr").remove() }; function AddFooterFilter() { table.columns().flatten().each(function (a) { var e = $("<select />").appendTo(table.column(a).footer()).on("change", function () { table.column(a).search($(this).val()).draw() }); table.column(a).cache("search").sort().unique().each(function (a) { e.append($('<option value="' + a + '">' + a + "</option>")) }) }) }